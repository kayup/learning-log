# 『おうちで学べるネットワークのきほん第2版』学習ノート

## 📚 書籍情報
- **書名**：おうちで学べるネットワークのきほん第2版
- **著者**：Gene
- **出版社**：翔泳社
- **出版日**：2024年5月27日
- **学習期間**：2025年8月17日～2025年8月26日

---

## 🎯 学習の目的・選んだ理由
* ネットワークの基礎を易しく学ぶため
* ネットワークに関する知識を深めるため
* 応用情報技術者試験の合格に役立てるため
* ネットワークの設計・構築・運用に必要な具体的な構成を理解するため

---

## 🧠 学んだこと
### ネットワークの基本
- データを送受信する主体はアプリケーション
- アプリケーション間でデータをやりとりするには
  - どの機器のアプリケーションかを特定する必要がある
  - データのフォーマットや手順を定める必要がある
- これを実現するために **TCP/IP** を利用する

### TCP/IPの4階層
- **アプリケーション層**
  - ユーザーが利用するWebブラウザなどが扱うデータのフォーマットや手順を定義
  - 主なプロトコル：HTTP/HTTPS、DNS、DHCP
  - 文字・画像・音声などへ0,1のデータを変換
- **トランスポート層**
  - 適切なアプリケーションへデータを振り分ける役割
  - 主なプロトコル：TCP、UDP
  - ポート番号でアプリケーションを識別
- **インターネット層**
  - 送信元から宛先まで0,1のデータを転送する役割（エンドツーエンド通信）
  - 主なプロトコル：IP
  - IPアドレスで送信元・宛先を特定
- **ネットワークインターフェース層**
  - 0,1のデータを物理信号として伝送
  - 主なプロトコル：イーサネット、Wi-Fi
  - MACアドレスで送信元・宛先を特定

### データのカプセル化と呼び方
- 各層ごとにヘッダーを付加する → カプセル化
- 各層での呼び名
  - アプリケーション層：メッセージ
  - トランスポート層：セグメント（TCP）/ データグラム（UDP）
  - インターネット層：パケット / データグラム
  - ネットワークIF層：フレーム
- 例（Webブラウザ通信）
  - HTTPメッセージ → TCPセグメント → IPパケット → イーサネットフレーム

### 代表的なネットワーク機器
- L2スイッチ：1つのイーサネットを使ったネットワークを構築
- ルーター：複数ネットワークを相互接続
- L3スイッチ：L2スイッチとルーターの両機能を持つ
- 機器にはインターフェース（ポート）があり、接続関係を「リンク」と呼ぶ

### データ転送の仕組み
- デジタルデータを物理信号（電気・光・電波）に変換して伝送
- 伝送媒体：LANケーブル（電気）、光ファイバー（光）、無線LAN（電波）
- 通信速度：bps（1秒あたりのビット数）
  - 高周波対応の媒体を使うと高速化可能
- ネットワーク機器のデータ転送の流れ
  1. IFで信号を受信してデジタルデータに復元
  2. ヘッダーを参照し転送先を判断
  3. 出力IFから信号を送出


### ネットワークの分類
    - プライベートネットワーク：利用するユーザーを限定しているネットワーク
        - 例：社内ネットワーク
            - 複数の拠点間でも通信ができるよう、社内ネットワークをLAN（Local Area Network）とWAN（Wide Area Network）から構成する
            - LAN・・ある拠点のネットワーク全体のこと
            - WAN・・離れた拠点間を接続するネットワークのこと
            - 拠点が1か所の場合はLANのみで、主にイーサネットと無線LANで構築する
    - インターネット：利用するユーザーを限定できないネットワーク
        - インターネットとは、様々な組織のネットワークを相互接続したネットワークのこと
        - インターネットを構成するある組織のネットワークをAS(Autonomous System):自律システムと呼び、世界中にあるASを相互接続したものがインターネット
            - ASの具体的な例として、ISP(Internet Service Provider):インターネット接続サービスを提供する事業者

    - プライベートネットワークからインターネットへの通信
        - この通信技術を実現する主要な技術は次の2つ
            - NAT(Network Address Translation)/NAPT(Network Port Address Translation)
                - プライベートネットワークのPCはそのままではインターネットのサーバーと通信できないため、  
                NAT/NAPTにより送信元IPアドレスを変換して、プライベートNWからでもインターネットにつながるようにする
            - ファイアウォール
                - プライベートNWから開始した通信のリプライだけを許可する機能をもち、インターネットからプライベートNWへの不正アクセスを防止できる
    - インターネットからプライベートNWへの通信
        - 実現するポイントは次の2つ
            - ファイアウォール
                - 例外として許可する設定が必要
            - ポート開放
                - 宛先IPアドレスとポート番号を変換して、インターネットからのリクエストとプライベートネットワーク内の適切な機器とアプリケーションへ転送できる
    - インターネットを経由するプライベートNW間の通信(インターネットVPN)
        - インターネットVPNにより、インターネットをプライベートNWのように使える
        - 実現ポイントは2つ
            - カプセル化/暗号化
                - VPNを実現するためにVPN用のヘッダーを新しく付加(カプセル化)する。
                - 悪意を持つユーザーから社内のNWを盗聴されたりデータを改ざんされたりしないよう暗号化する
            - VPNゲートウェイ
                - 上記を行う機器

### クラウドサービス
    - クラウドサービス：ネットワーク経由でクラウドサービス事業者のサーバーの機能だけを利用するサービス
    - クラウドサービスの分類
        - IaaS(Infrastructure as a Service)
        - PaaS(Platform as a Service)
        - SaaS(Software as a Service)

### イーサネット＆無線LANとMACアドレス
    - 物理的な信号の送信元と宛先になるインターフェイスをMACアドレスで識別する（ipconfig /allコマンド）
    - NWIF層のプロトコルで0,1のデータは最終的に物理的な信号として伝えられるため、NWを作る際は物理的な信号が伝わるようにしなければならない
        - このNWIF層のプロトコルとして非常によく使われるものがイーサネットと無線LAN(wi-fi)
        - イーサネットや無線LANのNWを構築して物理信号が伝えられるようにするだけではまだ不十分
        - さらに、IPで0,1のデータを転送できるように各機器へ適切なTCP/IP設定を行わなければならない

    - MACアドレスとは：イーサネットIF、無線LANIFを識別するための情報で、ビット数は48ビット
        - MACアドレスによって、物理信号の送信元と宛先IFを特定できるようになる
        　・・「このデータの物理信号はここ発信でここ宛てですよ！」と示すものがMACアドレス
        　データを送る際は、イーサネットおよび無線LANヘッダーに送信元/宛先MACアドレスを指定する
        - MACアドレスの48ビットのうち、
            - 先頭の24ビットがOUI(Organizationally Unique Identifier)：イーサネットIFを製造しているベンダー(メーカー)の識別コード
            - そのあとの24ビットがシリアル番号：イーサネットIFを製造した各ベンダーが割り当てた番号
            の構成
        - MACアドレスは16進数で表記する

        - MACアドレスには各イーサネット/無線LANIFに割り当てられているもの以外の特別な用途で利用する次の2つがある
            - ブロードキャストMACアドレス
                - 同じNW上のすべてのイーサネットIFへイーサネットフレームを送信したいときに使うMACアドレス
                - 48ビットですべて1と表記し、16進数ではすべてFで表記する
                - しくみ：L2スイッチのフラッディングと呼ばれる転送の動作でイーサネットフレームをコピーして同一NW全体へ転送
            - マルチキャストMACアドレス
                - 同NW内の特定のグループ宛てにイーサネットフレームを送信したいときに使う
                - MACアドレスの1バイト目の再開ビットをI/G(Individual/Group)と呼び、I/Gビットが1のMACアドレスがマルチキャストのMACアドレス

### 「有線のネットワーク」イーサネット
    - イーサネットにより0,1のデータを電気信号または光信号として伝える
    - イーサネット：データを「物理的に転送する」ためのプロトコル
        - イーサネットにより、同じNW内のイーサネットIF間でデータを物理的に転送することができる
        - 物理的に転送する＝0,1のデジタルデータを物理的な信号に変換して送り届ける
    - イーサネットの規格はIEEE802.3ワーキンググループで定められている
        - イーサネットの規格名称には「IEEE802.3」で始まるものと、「1000BASE-T」などの伝送速度と伝送媒体の特徴を組みあわせたものがある
        - 「1000BASE-T」の表記について
            - 最初の数字は伝送速度。1000の場合は1000Mbps=1Gbpsの伝送速度のイーサネット規格
            - BASE・・ベースバンド方式
            - -以降・・伝送媒体(ケーブル)や物理信号の変換の特徴。Tは伝送媒体にUTPケーブルを利用
        - 2024年4月現在、最もよく使われているイーサネット規格は1000BASE-T
    - UTPケーブルとRJ-45インターフェイス
        - UTPケーブル＝いわゆるLANケーブル
            - 100ｍまでしかつなげない
        - UTPケーブルで配線するイーサネットIFがRJ-45・・いわゆるLANポート
            - RJ-45のイーサネットIFはMDIとMDX-Xの2種類に分かれる

    - イーサネットのフレームフォーマット    
        - イーサネットでデータを転送するためにはイーサネットヘッダーを付加してイーサネットフレームにする必要がある
        - そのあと、電気や光などの物理的な信号に変換してイーサネットIFから送り出す
        - イーサネットヘッダー
            - 宛先MACアドレス、送信元MACアドレス、タイプコードから構成
            - 宛先MACアドレスをどのように決めるかがイーサネットの通信を考える上で重要
                - IPパケットをイーサネットフレームワークにするときには、宛先MACアドレスをARP(Address Resolution Protocol)で解決する
                    - APR：IPアドレスから適切なMACアドレスを求めるためのプロトコルのこと
            - タイプコード：イーサネットの上位プロトコルを表す数値
            - イーサネットのフレームフォーマットの画像挿入したい
        - イーサネットフレームのデータ部分の最大サイズMTUはデフォルトで1,500バイト
            → 多くの場合、1500バイト内に収まるようにTCPでデータの分割が行われる

### 「無線のネットワーク」無線LAN(Wi-Fi)
    - 無線LAN：同一ネットワーク内の無線LANインターフェイス間で0,1のデータを電波として伝えるためのプロトコル
        - ただし電波を使ったデータ転送は無線LAN以外の他の電波と干渉したり遮蔽物により電波が届かなくなったりするので不安定になることがある
    - 無線LANの仕組みのキーワード
        - アクセスポイント
            - 無線LANで通信するためのグループを決める機器（親機ともいう）
            - ルーターにアクセスポイントの機能が備わっている（無線LANルーター）ことも珍しくない
        - クライアント
            - 無線LANを利用してデータを送受信する機器（子機ともいう）
            - アクセスポイントやクライアントはMACアドレスで識別する
            → アクセスポイントやクライアントは、正確には無線LANのIFのこと
        - SSID(Service Set IDentifier)
            - アクセスポイントで決めた無線LANのグループのことをESS(Extended Service Set)と呼び、このESSを識別するためのSSIDという文字列もアクセスポイントで設定する。
            同じSSIDとクライアントの間で0,1のデータを電波として伝える
        - アソシエーション
            - アクセスポイントへ接続すること
        - ディストリビューションシステム
            - 複数のアクセスポイントを相互接続する仕組み
    - 無線LAN規格はIEEE802.11ワーキンググループが標準化しており、規格名称はIEEE802.11で始まる
    - 無線LANのセキュリティリスクと対策
        - 電波を傍受してデータを盗み見る → 暗号化/改ざんチェック
        - アクセスポイントに勝手に接続 → 認証
        - 偽のアクセスポイントを勝手に立てる → IDS
    - 無線LANのセキュリティ規格
        - IEEE802.11iで標準化
        - 製品に実装しているセキュリティ規格をWPA(Wi-Fi Protected Access)規格
    - Bluetooth
        - 用途：主に周辺機器の接続、IoT機器のネットワーク接続
        - 通信範囲：10ｍ程度。PAN(Personal Area Network)とも呼ばれる。
    - 携帯電話回線
        - 用途：音声通話サービス、インターネットアクセス
        - 通信範囲：基地局から数km程度
        - TCP/IPを利用

### IP(Internet Protcol)とは何か
    - IP：0,1のデータを転送するためのプロトコル
    - IPを利用すると物理的にどんなに離れていても、0,1のデータを適切な宛先まで送り届けることができる。
    - IPによって、送信元から最終的な宛先までデータを送ることをエンドツーエンド通信
    - IPによるでデータの通信はシンプルで、データにIPヘッダーを付加しIPパケットにしてNWに送り出すだけ
    　すると、宛先まで転送(ルーティング)してくれる
    　※IPだけでは実際にデータは届かず、IPだけでなくイーサネット/無線LANといったネットワークIF層プロトコルとの組み合わせが必要
    - IPヘッダーには色々な情報が含まれるが、特に宛先/送信元IPアドレスの指定が重要
### IPアドレスとは何か
    - IPアドレス：TCP/IPにおいて通信相手となるホストを識別するための32ビットの識別情報
        - ホスト・・TCP/IPを使いデータを送受信する機器
        - 一般的な表記：ドット付き10進数表記
        - 正確にはホスト(PC、スマホ)そのものではなくホストのIFをIPアドレスで識別している
        - IPアドレスはイーサネットやWi-FiのIFに設定して、IPアドレスとMACアドレスを関連付けるため、IPアドレスとMACアドレスは常に一定でなく変わる可能性がある
            - 現在のIPアドレスとMACアドレスの対応を調べること：アドレス解決
            - アドレス解決を行うためのプロトコル：ARP
### データの宛先は1つ？それとも複数？
    - ユニキャスト
        - 1対1の通信
    - ブロードキャスト
        - 同一NW上のすべてのホストへ一括してデータを送信する通信
    - マルチキャスト
        - 特定のグループに含まれる複数のホストへ一括してデータを送信する通信
    - ※送信元IPアドレスはいずれもユニキャストIPアドレスのまま

### ユニキャストIPアドレスとは？
    - TCP/IPの通信の大部分はユニキャスト通信が担うため、ユニキャストIPアドレスの理解は重要
    - ネットワークアドレス（ネットワーク部）とホストアドレス（ホスト部）で構成される
        - NWアドレスでネットワークを、ホストアドレスでNWのホスト(のIF)を識別する
        → IPアドレスを見れば、どのネットワークのどのホスト(のIF)かがわかる
    - NWアドレスとホストアドレスの区切り方でさらに次のように分類できる
        - クラスフルアドレス(クラスA/B/C)
            - 初期のIPアドレスのNWアドレスとホストアドレスの区切りの決め方
              ※現在はクラスフルアドレスを利用せず、クラスレスアドレスでサブネットマスクで区切りを明示的に決める
            クラス  区切り      先頭の10進数の範囲
            クラスA 8ビット     1~126
            クラスB 16ビット    128~191
            クラスC 24ビット    192~223

        - クラスレスアドレス
            - IPアドレスの前半のNWアドレスと後半のホストアドレスの区切りをサブネットマスクによって決める考え方
            - クラスレスアドレスではIPアドレスを設定するときに必ずサブネットマスクも設定する必要がある
            - サブネットマスクはIPアドレスと同じく32ビットで1と0が32個並ぶ
                - ビット1に対応する部分はNWアドレス、ビット0に対応する部分はホストアドレス
                - 表記：8ビットずつ10進数に変換して.で区切り表示またはプレフィックス表記

### ARPとは何か
    - IPアドレスだけでなくMACアドレスも必要
        - IPで0,1の論理的なデータを転送できるが、IPには0,1のデータを物理的な信号に変換する機能がないため、イーサネット/無線LANなどを組み合わせて物理的な信号に変換する必要がある
        - IPアドレス：0,1の論理的なデータの宛先と送信元を示す
        - MACアドレス：電気信号/電波など物理的な信号の宛先と送信元を示す
        → IPだけでなくイーサネット/無線LANも組み合わせる＝IPアドレスとMACアドレスの両方のアドレスが必要
        - TCP/IPには自動的に適切なIPアドレスおよびMACアドレスを求めるしくみが備わっている    
            - IPアドレスを求める仕組み：DNS
            - MACアドレスを求める仕組み：ARP

    - ARPのしくみ
        - ARP：IPアドレスとMACアドレスを対応づけるためのプロトコル
            - この2つと対応づけることをアドレス解決
        - 具体的なしくみ
            - IPパケットをイーサネットIFから送り出すときにはイーサネットヘッダーを付加する
            - IPヘッダーにはIPアドレスが必要なように、イーサネットヘッダーにはMACアドレスが必要
            - 送信元IPアドレスと送信元MACアドレスはパケットを送信する機器のものなので簡単にわかる
            - TCP/IPでは必ずIPアドレスを指定するので、宛先IPアドレスは指定されたものを使う
            - あとは宛先MACアドレスが必要だが、宛先IPアドレスに対応するMACアドレスを求めるためにARPがある
            - ARPのアドレス解決の対象は同じネットワーク内のIPアドレス
            - イーサネットIFで接続されているPCなどの機器がIPパケットを送信するために宛先IPを指定すると、自動的にARPが行われる
            - ARPの流れ
                - 1.ARPリクエストでIPアドレスに対応するMACアドレスを問い合わせ(ブロードキャスト)
                - 2.問い合わせされたIPアドレスをもつホストがARPリプライでMACアドレスを教える
                - 3.アドレス解決したIPアドレスとMACアドレスの対応をARPキャッシュに保存する
            - 異なるNWへデータを転送するときのMACアドレスの求め方
                - まずデフォルトゲートウェイに転送する
                    - デフォルトゲートウェイ：同じネットワーク上のルーターのIPアドレスのことで、他のNWへの入り口
                    - ルーターによって複数のネットワークが相互接続されており、異なるNWは同じNW上のルーターの先にある
                    - そのため、データを送るときには問い合わせのIPアドレスとしてデフォルトゲートウェイのIPアドレスでARPリクエストを送信する
                - デフォルトゲートウェイはデータを受信すると、宛先IPアドレスにもとづきパケットをルーティングする

### グローバルアドレスとプライベートアドレス
    - インターネットで利用するIPアドレス：グローバルアドレス
    - 社内NWや家庭内NWなどのプライベートNWで利用するIPアドレス：プライベートアドレス

    - グローバルアドレスの管理
        - 重複しないように管理されている
        - ICANNという組織を中心としてIRがグローバルアドレスの割り当てを管理
        - グローバルアドレスを節約するために導入されたのがプライベートアドレス
    - プライベートアドレスの管理
        - プライベートアドレス：プライベートNW内という限られた範囲で利用することを前提として使いまわすようにしているIPアドレスの範囲
        - 範囲は次の3つに決められている
            - 10.0.0.0 ~ 10.255.255.255
            - 172.16.0.0 ~ 172.31.255.255
            - 192.168.0.0 ~ 192.168.255.255

    - NAT/NAPT プライベートアドレスのPCからインターネットへ
        - プライベートアドレスのままではインターネットにアクセスすることができない
            - インターネット上では宛先IPアドレスがプライベートアドレスのIPパケットを必ず破棄するため
            → プライベートアドレスのPC/スマホなどからインターネットへアクセスするときはNAT(Network Address Translation)/NAPT(Network Address Port Translation)が必要になる

        - たいていはインターネットへ接続するためにルーターでNATを行う
        - 最も一般的なNATのアドレス変換の動作
            - 1.プライベートNW（内部NW）からインターネット（外部NW）宛てのIPパケットの送信元IPアドレスを、プライベートアドレスからグローバルアドレスに変換してインターネットへ転送する
            - 2.変換したアドレス情報をNATテーブルに保存する
            - 3.インターネットからプライベートNW宛てのIPパケットでNATテーブルに一致するグローバルアドレスの宛先IPをプライベートアドレスに変換してプライベートNWに転送する

        - 単純なNATのアドレス変換では、プライベートアドレスとグローバルアドレスが1対1の対応関係となっている
            ・・プライベートアドレスの数だけグローバルアドレスが必要となってしまう
            → 複数のプライベートアドレスを1つのグローバルアドレスに変換するNAPTを使う

        - NAPT：プライベートアドレスをもつ複数のホストで1つのグローバルアドレスを共有できるようにするためのアドレス変換のこと
            - 1つのグローバルアドレスを複数のプライベートアドレスに対応づけるので、NATテーブルに保持するアドレス変換の情報に、TCP/UDPのポート番号も追加する。このポート番号を見て、複数あるプライベートアドレスに区別をつける

        - NATという言葉はNAPTの動作も含んでいることが多く、IPアドレスだけを変換するNATを行うことはほとんどない

### IPv6のキホン
    - IPv6はIPv4の次のバージョンのプロトコル
    - 現行のIPv4と基本的な役割は変わらず、Webブラウザーなどで扱うアプリケーションのデータをあるホストから別のホストまで送り届ける役割を担う
    - IPv4からIPv6へは32ビットから128ビットへIPアドレスが拡張されている

### DNSで宛先IPアドレスを求める
    - DNS：ホスト名からIPアドレスを求めるためのプロトコル
        - ユーザーがURLなどのアプリケーションのアドレスを指定したときに、ホスト名に対するIPアドレスを自動的に求めることがDNSの役割
        - ホスト名からIPアドレスを求めることを名前解決
        - 携帯電話の電話帳のイメージ
        - DNSサーバーにホスト名とIPアドレスの対応をあらかじめ登録しており、PC/スマホが自動的にDNSサーバーに問い合わせて適切なIPアドレスを取得し、IPヘッダーをつけてデータを送信できるようになる
        - DNSサーバーの設定が正しくなかったり障害などの影響でDNSサーバーへの問い合わせができなくなったりすると、通信する宛先IPアドレスがわからずTCP/IPの通信が成り立たない

    - インターネットのホスト名とIPアドレスは**ドメイン**という単位で階層化して分散管理している
        - 例）ドメイン名を「n-study.com」とすると
            - Webサーバーは「www.n-study.com」
            - メールサーバーは「mail.n-study.com」
            - ファイルサーバーは「file.n-study.com」
    - ドメイン名も含めた名前全体をFQDN(Fully Qualified Domain Name)
        - 人の名前に例えると、ドメイン名：姓、ホスト名：名、FQDN：フルネーム
    - DNSによる名前解決を行うためにはリソースレコード(ドメイン内のホスト名とIPアドレスの対応)の登録が必要
    - DNSドメインはルート(.)を頂点として階層構造になっている
    - DNSサーバーへの問い合わせ機能はWindowsなどのOSに組み込まれており、DNSリゾルバと呼ぶ

### ポート番号でアプリケーションを識別する
    - ポート番号：TCP/IPのアプリケーションを識別するための番号
    - 16ビットの数値が割り当てられており、0 ~ 65535の範囲
        - ウェルのノウンポート：0 ~ 1023
            - あらかじめ決められており、サーバーアプリケーションを起動すると、ウェルノウンポートでクライアントアプリケーションからのリクエストを待ち受ける
        - 登録済みポート：1024 ~ 49151
        - ダイナミック/プライベートポート：49152 ~ 65536
            - クライアントアプリケーションを識別するためのポート番号

    - ｱﾌﾟﾘｹｰｼｮﾝの一連のデータのまとまりであるフローは**IPアドレスとポート番号の組み合わせで識別できる**
        - IPヘッダーにあるIPアドレスでアプリケーションが動作するPC/スマホ/サーバーなどがわかる
        - TCPヘッダーにあるポート番号でPC/サーバー上のどのアプリケーションかがわかる
            フローの識別
            ＜IPアドレス＞：＜ポート番号＞
            どのﾎｽﾄ？　　　　どのｱﾌﾟﾘｹｰｼｮﾝ？

### 信頼性を保ったデータ転送を行うTCP
    - TCP：アプリケーション間で信頼性を保ったデータ転送を行うためのプロトコル
        - 信頼性を保ったアプリケーション間でのデータ転送は**コネクションの確立**と**受信確認**がポイント
        　= 通信が正しく行えるかを確認してからデータを送り、送ったら無事に宛先に届いたかを確認することで、特定のアプリケーション間で確実にデータを受信できるようにしている
    - TCPを利用したアプリケーション間のデータ転送の手順
        - 1.TCPコネクションの確立
            - データを送受信するアプリケーション間の通信が正常に行えるかどうかを確認する
            　=　データの送り先のAPがきちんと起動していてデータを送受信できる状態になっているかを確認する
            　→　この確認のプロセスを**3ウェイハンドシェイク**
            　・・AP間で仮想的な直通の通信回線ができる
        - 2.アプリケーション間のデータの送受信
            - APが扱うデータをTCPで受信するためには、APのデータにAPプロトコルのヘッダーとTCPヘッダーを付加する→これをTCPセグメント
            - データを受け取ったら受信確認(ACK)を行う
            - ACKによりフロー制御を行うかどうかも判断する
        - 3.TCPコネクションの切断
            - TCPコネクションを維持し続けるとホストのCPUやメモリを消費してしまうため、
            　APのデータ転送が終了したらTCPコネクションを切断することでホストのCPUやメモリの利用を開放する

    - TCPヘッダーフォーマット
        - ★ポート番号
            - ポート番号で適切なAPプロトコルへデータを振り分けることができる
        - シーケンス番号
            - TCPで転送するデータの順序を表している
            - データを分割しているときにはシーケンス番号でどのようにデータを分割しているかがわかる
        - ACK番号
            - データを正しく受信したことを確認するために利用
        - フラグ
            - TCPコネクションの確立やデータ転送の制御のために使う
    - TCPコネクションの確立
        - データを転送する前にアプリケーション間でデータの送受信が確実にできることを確認している
        - このとき、初期のシーケンス番号やデータを分割する単位であるMMS(Maximum Segment Size)を決める
        - 3ウェイハンドシェイクでは**SYNフラグ**と**ACKフラグ**が重要
        - TCPコネクション確立の手順
            - 1. クライアントAPからコネクション確立の要求を送信する(SYNフラグ)
            - 2. コネクション要求に応答するとともに、サーバーAPからもコネクション確立の要求を送信する(SYN/ACKフラグ)
            - 3. サーバーAPからのコネクション要求に応答して、クライアントAPとサーバーAP間で双方向のTCPコネクションが確立する(ACKフラグ)
    
    - ｱﾌﾟﾘｹｰｼｮﾝ間のデータの送受信[データの分割]
        - TCPにはデータの分割機能もある
        - MSS(TCPでAPのデータを分割する単位、標準的なサイズは1460バイト)を超えるサイズのデータはMMSごとに分割して送信する
        
    - TCPコネクションの切断
        - TCPｱﾌﾟﾘｹｰｼｮﾝのデータの送受信がすべて完了したら、TCPコネクションを切断する。  
        このとき、TCPコネクションは双方向で確立しているため、4ステップで切断する
            - このTCPコネクションの切断要求を表すのがFINフラグ 

### 効率のよりデータ転送を行うUDP
    - UDP:単純にｱﾌﾟﾘｹｰｼｮﾝのデータを振り分けるためだけに利用するプロトコル
        - TCPのような確認などは一切行わず、データの分割機能もない
        - 相手のアプリケーションが動作しているかどうかの確認をせずにUDPデータグラムとしてAPのデータを送信する
        - UDPを利用するアプリケーションの例：IP電話

### ｱﾌﾟﾘｹｰｼｮﾝのデータが届くまでのまとめ

    階層ごとのプロトコルの概要
    |階層|プロトコル|概要|
    |----|---------|----|
    |トランスポート層|TCP/UDP|適切なアプリケーションへ振り分ける(ポート番号)|
    |インターネット層|IP|アプリケーションが動作しているホスト(PC、ｻｰﾊﾞｰなど)まで転送する(IPアドレス)|
    |ﾈｯﾄﾜｰｸｲﾝﾀｰﾌｪｲｽ層|ｲｰｻﾈｯﾄ、無線LAN|同じネットワーク内のIF間で物理信号を送り届ける(MACアドレスなど)|

    - 各転送プロトコルのヘッダーを付けるためにはDNSとARPも必要
        - DNS：IPヘッダーを付加するために必要
        - ARP：ｲｰｻﾈｯﾄ/Wi-Fiヘッダーを付加するために必要
        - ※TCP/UDPヘッダーのポート番号を付加するときは両方とも必要なし

### 「ポートを開ける」とは？
    - インターネットからプライベートネットワークへ通信するときに必要になるのが「ポートを開ける」
    - ポートを開けるとは
        - インターネットからプライベートネットワークへの通信を可能にして、アプリケーションを利用できるようにすること  
        そのために宛先IPアドレスの交換を行う

    - NAT/NAPTとポート開放の違い

    | |用途|リクエストのアドレス変換|
    |---|---|---|
    |NATP/NAPT|プライベートNWからインターネットへアクセスできるようにするアドレス変換|プライベートNWからインターネット宛てのリクエストの送信元IPアドレスを変換する|
    |ポート開放|インターネットからプライベートNWへアクセスできるようにするアドレス変換|インターネットからプライベートNW宛てのリクエストの宛先IPアドレスを変換する|

### 他のネットワークへの入り口 デフォルトゲートウェイ
    - デフォルトゲートウェイのIPアドレスもTCP/IPの設定で大事
    - デフォルトゲートウェイとは
        - 同じNW上のルーターやレイヤー3スイッチのこと  
        デフォルトゲートウェイのIPアドレスには同じネットワーク上のルーターやレイヤー3スイッチのIPアドレスを指定する
        - ルーターやレイヤー3スイッチ：ネットワークの相互接続を行うネットワーク機器  
        →　ホストが接続している以外のネットワークはルーターやレイヤー3スイッチの向こう側にある  
        →　そのためデフォルトゲートウェイは他のネットワークの入り口にあたり、他のネットワーク宛てのデータはまずデフォルトへ転送される

    - TCP/IPの設定まとめ。まず次のTCP/IPの設定を正しく行わなければいけない
        - IPアドレス/サブネットマスク   
            - イーサネットやWi-FiなどのIFにIPアドレス/サブネットマスクを設定することで、IPネットワークへ接続する。すると、IPパケットを受信できるようになる。
            - このIPアドレスの前半のネットワークアドレスを特定するためにサブネットマスクが必要
            - ホストのIFからIPパケットを受信するとき、送信元IPアドレスとして設定しているIPアドレスを指定する
            - IPアドレス/サブネットマスクの設定が正しくないとIPパケットを正しく送受信できなくなってしまう
        - DNSサーバーのIPアドレス
            - ホストからIPパケットを送信するときには、IPヘッダーの宛先IPアドレスを指定しなければいけない  
            →　DNSサーバーに問い合わせることで適切な宛先IPアドレスを求める
        - デフォルトゲートウェイのIPアドレス
            - ホストと同じネットワーク上のルーターまたはレイヤー3スイッチのIPアドレスを、デフォルトゲートウェイのIPアドレスとして設定する  
            他のネットワーク宛てのIPパケットはデフォルトゲートウェイへ転送する  
            このとき、他のNW宛てのIPパケットに付加するイーサネットヘッダーの宛先MACアドレスを求めるために、正しいデフォルトゲートウェイのIPアドレスの指定が必要

        →　これらのTCP/IPの設定を正しく行うことで、ホストから送信するデータの各プロトコルへのヘッダーを適切につけられるようになる

### 設定を自動化するDHCP
    - DHCP：IPアドレスなどのTCP/IPの通信に必要な設定を自動的に行うためのプロトコル
        - DHCPはトランスポート層にUDPを利用しており、  
        ウェルノウンポートは67,68で、DHCPサーバーが67,DHCPクライアントが68
    
        - DHCPのしくみ
        
            DHCPクライアント                                 DHCPサーバー
            |                                                 |
            |  (UDP 68→67, 0.0.0.0 → 255.255.255.255)        |
        1.   |-------------------- DHCPDISCOVER -------------->|  IP提案を探す
            |                                                 |
        2.   |<--------------------- DHCPOFFER ----------------|  (提案IP/オプション)
            |                                                 |
        3.   |--------------------- DHCPREQUEST -------------->|  (提案の明示要求)
            |                                                 |
        4.   |<----------------------- DHCPACK ----------------|  (確定/リース開始)
            |                                                 |


### 主な通信確認コマンド
    - 「今まで普通に使えていたのに、突然ネットワークにつながらなくなった」というとき、  
    「何が原因で」ネットワークにつながらなくなったのかを調べることができれば、自分でトラブルを解決して利用できる可能性が高くなる  
    →　そこで通信コマンドを適切にるようすれば、NWのトラブルの原因を調べることができる

    主な通信コマンド
    |コマンド|概要|仕組み|
    |---|---|---|
    |ipconfig|PCのTCP/IP設定を確認する||
    |nslookup|DNSサーバーが正常に動作しているかどうか確認する||
    |ping|指定したIPアドレスまたはホスト名まで通信できるかどうかを確認する|ICMPエコーリクエスト、ICMPエコーリプライ|
    |tracert|指定したIPアドレスまたはホスト名への通信経路(経由するルーター)を確認する|TTL(TimeToLive)：データが経由できるルーターの台数を利用|

### ネットワークトラブルの切り分け手順
    - NWがつながらないときには、トラブルの切り分け、すなわち**どこに問題があるのかを調べるとき、基本的にはユーザーに近い部分から見ていく**
    - 個人ユーザーのネットワークにおけるトラブルの切り分け手順
        - Step1. LANケーブルが正しく接続されているかを確認する
        - Step2. ルーター、スイッチなどのネットワーク機器の電源が入っていることを確認する
        - Step3. PCのTCP/IP設置が正しいことを確認する
        - Step4. デフォルトゲートウェイと通信できることを確認する
        - Step5. DNSサーバーによる名前解決ができることを確認する
        - Step6. GoogleやYahoo!などインターネット上の有名なサーバーと通信できることを確認する
        - Step7. 利用しているアプリケーションの設定が正しいかを確認する

### Webページを転送するHTTP
    - HTTP(Hyper Text Transfar Protocol)
        - ハイパーテキスト、すなわちWebサイトを構成するWebページ(HTMLファイル)を転送するためのプロトコル  
        しかし、HTTPはハイパーテキストに限らず、様々な種類のファイルを転送する汎用的なファイル転送プロトコルとして利用できる  
        TCP/IPの最上位のアプリケーション層に位置するプロトコルで、その下のトランスポート層にはTCPを利用する  
        ウェルノウンポートは80  
        HTTPによるファイル転送はHTTPリクエストとHTTPレスポンスのやりとりによって行う
    - URL(Uniform Resource Locator)
        - ここでいうResourceは「ファイル」の意味で、URLによって転送してほしいファイルを指定する
        - 最初の「http」は**スキーム**といい、**WebブラウザーがWebサーバーのデータにアクセスするためのプロトコル**
        - 次の「:」と「//」は、そのあとに続く部分がホスト名であることを示す
            - Webサーバーへアクセスする際にはDNSによってホスト名からIPアドレスへの名前解決が必要
        - ホスト名の次はポート番号が続くがたいていは省略される
        - ホスト名やポート番号の次が**パス**で、**Webサーバー内のどこに目的とするファイルがあるか**を示す

    - HTTPリクエストの構成
        - リクエスト行
            - HTTPリクエストの1行目で、**Webサーバーに対する処理要求**を表す
            - メソッド、URI、バージョンで構成される
                - メソッド・・**サーバーに対する要求**を表す
                - URI・・**リクエストの対象となるデータ**を示す
                - バージョン・・WebブラウザーがサポートするHTTPバージョン。主に1.0か1.1
        - メッセージヘッダー
            - リクエスト行に続く複数行のテキスト列  
            Webブラウザーの種類やバージョン、対応するデータ形式などの情報を記述
        - 空白行
        - エンティティボディ
            - POSTメソッドでWebブラウザーからデータを送るときに使用

    - HTTPレスポンスの構成
        - HTTPリクエストの返事
        - レスポンス行
            - バージョン、ステータスコード、説明文で構成
                - ステータスコード・・リクエストに対するWebサーバーアプリケーションの処理結果を示す3桁の数字
                - 説明文・・ステータスコードの意味を簡単に示したテキスト
        - メッセージヘッダー
            - Webサーバーアプリケーションがより詳細な情報をWebブラウザーに伝えるために利用  
            データの形式、更新された日付など
        - 空白行
        - エンティティボディ
            - Webブラウザーに返信すべきデータが入る
   

                ┌─────────────┐  
   ┌─ URL       |    HTTP     | アプリケーション層  
   |            |ｳｪﾙﾉｳﾝﾎﾟｰﾄ 80 |  
   |            ├─────────────┤  
   |            |    TCP      |　トランスポート層  
   |            ├─────────────┤  
   ├→ IPｱﾄﾞﾚｽ 　 |    IP       |　インターネット層  
   |            ├─────────────┤  
   └→ MACｱﾄﾞﾚｽ   | ｲｰｻﾈｯﾄなど   |　ネットワークインターフェース層  
           　   └─────────────┘  

### Webアクセスを暗号化するHTTPS
    - HTTPS(HTTP over SSL/TLS)によって**WebブラウザーとWebサーバーアプリケーション間のHTTP通信を保護する**ことができる
    - SSL(Secure Sockets Layer)/TLS(Transport Layer Security)：TCP/IPのアプリケーションプロトコルのデータを保護するためのプロトコル
        - SSL/TLSの最も典型的な利用例は、Webアクセスを保護するこのHTTPS
    - HTTPのWebアクセスデータは暗号化されない
    - HTTPSで送信した情報を保護する具体的な方法
        - アクセス先のWebサーバーが本物であることを認証する
        - WebブラウザーとWebサーバーアプリケーション間のデータの暗号化と改ざんチェック
    - 常時SSL化：Webサイトのすべての通信をHTTPSで保護すること
    - ※SSLはすでに利用しておらず、実際はTLSを利用している

    - SSL/TLSの仕組みを理解するために重要な技術
        - SSL/TLSはデジタル証明書で、アクセス先のWebサーバーが本物であることを認証し、Webサーバーとの間のHTTP通信の暗号化と改ざんチェックを行う
        - デジタル証明書
            - SSL/TLSの仕組みで最も重要な技術
            - 証明書とは「誰か」が「何か」を証明するものであり、ここでは
                - **誰が：認証局**
                - **何か：サーバーは証明書に記載の組織が運用する正規のサーバーであること**  
                          **証明書が含む公開鍵で暗号化すればサーバーのみが復号できること**
            - 例：AmazonのWebサーバーのデジタル証明書
                - 「サーバーは確かに本物のAmazonのサーバーです。証明書に含まれる公開鍵で暗号化して情報を送ってもらえれば、他に漏れることはありません。証明書の発行元の認証局が保証します。」
        - デジタル署名
            - **データの作成者/送信者の身元と、データが改ざんされていないことを確認する**ために利用する  
            デジタル証明書に発行元の認証局のデジタル署名を付加する
        - ハッシュ関数
            - デジタル署名などで**データの改ざんや誤りがないか検出する**ために利用する
        - 暗号化(共通鍵暗号/公開鍵暗号)
            - SSL/TLSでは**共通鍵暗号と公開鍵暗号を組み合わせて利用する**
                - ※「SSL/TLS(HTTPS)はWebブラウザーからのデータをデジタル証明書の公開鍵で暗号化する」などと解説されることが多いがこの解説は正確ではない
            - 共通鍵暗号
                - データそのものは処理の負荷が軽い共通鍵暗号を使用する。共通鍵のもとを公開鍵暗号により、クライアントとサーバー間で共有する
            - 公開鍵暗号
                - デジタル証明書おの検証やでデータそのものの暗号化で使う共通鍵のもとを、クライアントとサーバー間で共有するために公開鍵暗号を利用する

### ネットワーク機器の概要
    - PC/スマホからNWに送り出されたデータを、L2スイッチ/ルーター/L3スイッチなどのネットワーク機器が適切な宛先のサーバーまで転送する
    - ネットワーク機器のポイント

        |ﾈｯﾄﾜｰｸ機器|役割|データの転送範囲|転送時に参照する情報|
        |---|---|---|---|
        |L2スイッチ|1つのｲｰｻﾈｯﾄのﾈｯﾄﾜｰｸをつくる|1つのﾈｯﾄﾜｰｸ内|MACアドレス(ｲｰｻﾈｯﾄﾍｯﾀﾞｰ)、MACアドレステーブル|
        |ルーター|ﾈｯﾄﾜｰｸ同士を相互接続する|ﾈｯﾄﾜｰｸ間|IPアドレス(IPﾍｯﾀﾞｰ)、ルーティングテーブル|
        |L3スイッチ|L2スイッチ兼ルーターで、ルーターと同じように使う|L2スイッチ兼ルーター|L2スイッチ兼ルーター|

        - L2スイッチのポイント
            - 1つのｲｰｻﾈｯﾄのﾈｯﾄﾜｰｸを構築すること
            - PCがﾈｯﾄﾜｰｸに接続するためにはL2スイッチに接続する → L2スイッチは「ネットワークの入り口」
            - L2スイッチが転送の対象とするデータはイーサネットフレーム
        - ルーターのポイント
            - 複数のﾈｯﾄﾜｰｸを相互接続することが役割
            - ルーターで複数のﾈｯﾄﾜｰｸを相互接続すると、異なるﾈｯﾄﾜｰｸ間でデータを転送することができる
            - ルーターが転送の対象とするデータは**IPパケット**
                - ルーターから転送するときに、データのイーサネットなどのL2ヘッダーは書き換えられる
        - L3スイッチのポイント
            - L2スイッチにルーター機能を組み込んでいるネットワーク機器
            - L2スイッチとしてもルーターとしても利用できるが、多くの場合ルーターと同じ役割で使う
            - データの転送の仕組みは、同じﾈｯﾄﾜｰｸ内へ転送するときにはｲｰｻﾈｯﾄﾍｯﾀﾞｰのMACアドレスを、ﾈｯﾄﾜｰｸ間でデータを転送するときにはIPﾍｯﾀﾞｰのIPアドレスを酸素湯する

### L2スイッチの仕組み
    - L2スイッチは特別な設定をしなくても動作するネットワーク機器
    - L2スイッチは流れてきた物理信号を適切なIFのみに流すようスイッチ(切り替え)する
    - 宛先に応じて適切なIFへ信号を流すために、**L2スイッチは、IFの先につながっている機器や宛先を把握しなければならない**
        - イーサネットでは信号の送信元と宛先はMACアドレスで認識してｲｰｻﾈｯﾄﾍｯﾀﾞｰに指定するが、  
        L2スイッチでは信号をイーサネットフレームとみてｲｰｻﾈｯﾄﾍｯﾀﾞｰを参照し転送処理を行う
            - ➀受信したMACアドレスを覚える
            - ➁宛先MACアドレスを見て転送する(フラッディング)

### ルーターの仕組み
    - ルーターは複数のﾈｯﾄﾜｰｸを相互接続し、ネットワーク間のデータ転送を行うためのﾈｯﾄﾜｰｸ機器  
    このルーターによるネットワーク間のデータ転送を**ルーティング**という
    - ルーターがﾈｯﾄﾜｰｸを相互接続するには、ルーターのIFの物理的な配線に加えて**IFにIPアドレスを設定する**
    - ルーターはIPアドレスに基づきデータ(IPパケット)を適切なﾈｯﾄﾜｰｸへ転送する。  
    そのためには、あらかじめルーターのﾙｰﾃｨﾝｸﾞﾃｰﾌﾞﾙに転送先のﾈｯﾄﾜｰｸの情報を登録する必要がある。  
    ルーティングでは、この**ﾙｰﾃｨﾝｸﾞﾃｰﾌﾞﾙを作成すること**がとても重要。
    - ルーターはIPパケットが届くと、IPﾍｯﾀﾞｰの宛先IPアドレスとﾙｰﾃｨﾝｸﾞﾃｰﾌﾞﾙから、次に転送するべきルーターを判断してIPパケットを転送する。  
    このとき、**ﾙｰﾃｨﾝｸﾞﾃｰﾌﾞﾙに登録されていないﾈｯﾄﾜｰｸ宛てのIPパケットは転送できずに破棄される**
    - **ネクストホップ：次に転送するべきルーター**

    - ﾙｰﾃｨﾝｸﾞﾃｰﾌﾞﾙとは
        - ルーターが認識するﾈｯﾄﾜｰｸの情報をまとめたデータベース。ﾈｯﾄﾜｰｸへIPパケットを転送するための経路を登録している。
            - 経路・・次に転送すべきルーターのこと
        - こうしたﾙｰﾃｨﾝｸﾞﾃｰﾌﾞﾙに登録されるﾈｯﾄﾜｰｸの情報を**ルート情報**や**経路情報**と呼ぶ
        - Cisco System社のルーターのルート情報には次の内容が含まれる
            - ルート情報の情報源
                - 直接接続、スタティックルート、ルーティングプロトコルなど
            - ﾈｯﾄﾜｰｸｱﾄﾞﾚｽ/ｻﾌﾞﾈｯﾄﾏｽｸ
                - IPパケットを転送する宛先のﾈｯﾄﾜｰｸ
            - メトリック
                - ルーターから目的のﾈｯﾄﾜｰｸまでの距離を数値化したもの
            - アドミニストレイティブディスタンス
            - ネクストホップアドレス
            - 出力インターフェイス
            - 経過時間
        - 「このﾈｯﾄﾜｰｸ宛てのIPパケットは、次にこのルーターに転送する」ということを示すのがルート情報
        - リモートﾈｯﾄﾜｰｸのルート情報の登録方法
            - スタティックルート・・スタティックルーティング
            - ルーティングプロトコル・・ダイナミックルーティング
                - ルーティングプロトコルにより、ルーターがルート情報を送信することを**アドバタイズ**
                - ルーティングプロトコル
                    - RIP
                    - OSPF
                    - EIGRP
                    - BGP

### L3スイッチの概要
    - L3スイッチは**VLAN**の設定次第でﾈｯﾄﾜｰｸを自由に分割できる
        - VLAN:設定で作成する**仮想的なL2スイッチ**のこと


### ファイアウォールとは？
    - ﾈｯﾄﾜｰｸのセキュリティを確保するための重要な機能  
    ファイアウォールによってﾈｯﾄﾜｰｸ上の通信のデータを全てチェックしており、あらかじめ設定している条件に基づいて**データを許可したり破棄したりすることで不正アクセスを防止する**  
    ・・つまり、ﾈｯﾄﾜｰｸ上の通信を監視する門番の役割を果たしている
    - セキュリティを確保する上で重要な仕組みが**多重防護**
        - 複数個所でデータをチェックすることで全体のセキュリティレベルを高めることができる

    - ファイアウォールの仕組み
        - ブロードバンドルーターでのファイアウォールは、基本的に**家庭内ﾈｯﾄﾜｰｸから開始されたインターネット向けの通信の返事だけを許可する**ようにしている
            - 家庭内ﾈｯﾄﾜｰｸから開始された通信の返事だけを許可するFWの仕組みを**SPI(Stateful Packet Inspection)**と呼び、**通信の状態を保持して一連の通信のデータのみを通過**させている  
            通信の状態を確認するときは、データに付加された次のヘッダーの情報を参照している
            - 宛先/送信元IPアドレス(IPﾍｯﾀﾞｰ)
            - プロトコル(IPﾍｯﾀﾞｰ)
            - 宛先/送信元ポート番号(TCPまたはUDPヘッダー)
    
        - 企業内ﾈｯﾄﾜｰｸでのファイアウォールも、ブロードバンドルーターと同様に必要な通信のデータのみを許可して不正アクセスを防止する
        - さらに、企業ﾈｯﾄﾜｰｸでは**DMZ(DeMilitarized Zone)**を構成している
        - インターネット側から直接のアクセスを受け付けるようなサーバーを**公開サーバー**
        - この**公開サーバーを設置するﾈｯﾄﾜｰｸ**がDMZ

        - 企業向けファイアウォール製品には3つ以上のIFがあり、企業内LAN、DMZ、インターネット側のﾈｯﾄﾜｰｸを相互接続している
        - インターネットからDMZに設置された公開サーバー宛ての通信はファイアウォールを通過できる  
        一方、ブロードバンドルーターのファイアウォール機能のように、インターネットから企業内LANのPC宛ての通信はFWでブロックされる
            - 企業内LANからインターネット宛ての通信のみFWを通過できる

    - FWだけでは不正アクセスを完全に防ぐことはできない
        - 主に、ｻｰﾊﾞｰやﾈｯﾄﾜｰｸのサービス停止を狙う**DoS(Denial of Service)攻撃**がある
        - Dos攻撃は、ルーターやサーバーに大量のパケットを送信し、処理ができないようにしてサービスを停止させることを狙った攻撃
            - このDoS攻撃に利用されるパケットは、WebサーバーへのTCPコネクション接続要求など、FWにとって正常なパケット
        - このようなFWで防げない不正アクセスに対応するために、FWを補完するシステムが**IDS(Intrusion Detection System)**
            - IDSは**ﾈｯﾄﾜｰｸ上を転送されていくトラフィックの中身をキャプチャして監視**する。  
            IDSでは、既存の不正アクセスのトラフィックパターンなどを記述した**シグネチャ**というデータベースを保持している。  
            監視したトラフィックをシグネチャと照らし合わせて不正アクセスを検出でき、検出すると管理者に通知する
        - IDSを進化させ、**不正アクセスの検出と防御も一緒に自動で行うシステムがIPS(Intrusion Prevention System)**
            - IPSは、ﾈｯﾄﾜｰｸ型IDSのようにスイッチに接続してﾈｯﾄﾜｰｸを通過するトラフィックを監視するのではなく、複数のﾈｯﾄﾜｰｸIFを持ち、**IPS自身をﾈｯﾄﾜｰｸトラフィックの通過ポイント**とする

### マルウェアに対する防御
    - 有害なソフトウェアを総称してマルウェアと呼ぶ
        - コンピュータウイルス・・自己伝染機能、潜伏機能、発病機能
        - トロイの木馬・・感染したPCに遠隔操作できるバックドアをつくる
        - ボット・・バックドア経由でPCを乗っ取るマルウェア
        - スパイウェア・・PCを監視して情報を外部へ送信するマルウェア
            - キーロガー・・スパイウェアの一種で、キーボード操作を監視して外部に送信する
        - アドウェア・・PCに広告を表示するマルウェア

    - ウイルス対策ソフトがウイルスを検出する仕組み
        - パターンマッチング
            - 既知のウイルスの特徴とPC上のファイルを比較する方法
            - 比較に用いるウイルスの特徴をまとめたデータベースを定義ファイル、シグネチャ
            - 常に定義ファイルを最新の状態に保つこと
        - ヒューリスティック検出
            - 不審な動きをするプログラムをウイルスとして検出する

### 暗号化のしくみ
    - NW上を転送されていくデータは盗聴や改ざんをされる可能性があり、そのような事態を防止する技術が**暗号化**
        - 暗号化されていないデータを**平文**
        - **暗号かぎを使って平文を暗号文にすること**を暗号化
            - このときの仕組みが**暗号化アルゴリズム**
        - 暗号文を暗号鍵でもとの平文に戻すことを**復号**
        - 主に2つの暗号化の方式である共通鍵暗号方式と公開鍵暗号方式がある

    - 共通鍵暗号方式の概要
        - 暗号化と復号で同じ暗号鍵を使用する
        - 同じ暗号鍵を使うことから対称鍵暗号方式とも呼ばれている
        - 主な暗号化アルゴリズムは**DES/3DES**と**AES**

    - 公開鍵暗号方式の概要
        - 暗号化と復号に異なる暗号鍵を使う
        - 主なアルゴリズムは**RSA暗号**と**楕円曲線暗号**

### デジタル署名と証明書
    - デジタル署名は**データから計算したハッシュ値を送信者の秘密鍵で暗号化**したもの
        - ハッシュ値の計算に使うアルゴリズムは**SHA-1**と**SHA-2**
        - データが改ざんされるとハッシュ値も変わる

    - **公開鍵が本物であることを証明することが証明書の役割**
    - 証明書は**証明局**と呼ばれる第三者機関が発行する
        - 証明書の中には公開鍵が入っている
    - 信頼されている認証局が発行した証明書を利用するシステムの基盤を**PKI(Public Key Infrastructure)**

### インターネットVPNとは
    - **VPN(Virtual Private Network)**とは、いろいろなユーザーで共有しているﾈｯﾄﾜｰｸを**仮想的にプライベートﾈｯﾄﾜｰｸとして扱う技術**
    - VPVの例
        - **インターネットVPN**
            - 限定されたユーザーだけが利用できる専用のプライベートﾈｯﾄﾜｰｸとして扱うことができる
            - インターネットVPNを行使区するための仕組みのポイントが**カプセル化**
    - VPNの仕組み
        - VPNゲートウェイ(インターネットVPNを構築するための機器)で、プライベートﾈｯﾄﾜｰｸ間の通信に新しく**VPNヘッダーを付加してインターネットVPNを構築する**
        - VPNﾍｯﾀﾞｰのカプセル化だけではセキュリテ面に不安があるため、暗号化も行う
        - カプセル化に関係し、インターネットVPNを構築する上でよく利用されるプロトコル(セキュリティアーキテクチャ)が**IPSec**
            - このIPSecによって、プライベートﾈｯﾄﾜｰｸの通信のデータを暗号化して、VPNﾍｯﾀﾞｰ(IPSecﾍｯﾀﾞｰと新しいIPﾍｯﾀﾞｰ)でカプセル化する
        - こうしたIPSecにより構築されたVPNを**IPSec-VPN**とも呼ぶ

    - インターネットVPNの形態
        - サイトツーサイトVPN
            - 企業の拠点間のVPNゲートウェイ間でカプセル化と暗号化を行う
        - リモートアクセスVPN
            - VPNゲートウェイとユーザーのPCでカプセル化と暗号化を行う
---

## ✍️ 所感・振り返り
- IPv6が全然わからない
- 基本情報のときは過去問やっただけで理解してなかった→応用情報では理解ベースで問題解けそう
- ﾈｯﾄﾜｰｸ全体の知識としてはまだ乏しいけど、基本となる部分を詳しく見れてよかった。やっと入門したというか、一歩踏み入れた感じ。
- セキュリティのところ全然わかってない...わかってないのに時間の都合上駆け足になってしまった
    - 特に共通鍵暗号/公開鍵暗号わかってないのに流し読みした...
- 応用情報合格に向けて一歩前進！進めていることが嬉しい！


* **理解度**: 基本情報技術者試験では過去問中心で理解していなかったが、今回は「理解」ベースで取り組めたため、知識を定着できそう。
* **進捗**: ネットワーク全体の知識はまだ浅いものの、基本となる部分を学べた。「やっと入門した」という実感がある。
* **課題**:
    * **IPv6**: 理解が不十分。
    * **セキュリティ**: 特に共通鍵暗号方式と公開鍵暗号方式について、いまだに理解が不十分なのに、時間の都合で駆け足になってしまった。
* **成果**: 応用情報技術者試験の合格に向けて、また一歩踏み出せた。学習を進められていることがモチベーションに繋がっている。